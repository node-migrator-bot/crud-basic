{>page/}
   {<page_script}
      <script src="/script/core.js" type="text/javascript"></script>
      <script src="/script/ajax.js" type="text/javascript"></script>
      <script src="/script/dom.js" type="text/javascript"></script>
      <script type="text/javascript">
         function updateResource(url) {
            var data = sps.Controls.toObject(document.getElementById('page'));
            sps.AJAX.put({
               url: url,
               content: data,
               onSuccess: function(data) {
                  alert(data.message);
                  window.location = data.url;
               },
               onError: function(data) {alert('Problem!')}
            });
         };
         
         function createForm() {
            sps.AJAX.get({
               url: '/resource/model/update/{entity}/{name}',
               handleAs: 'json',
               onSuccess: function(data) {
                  sps.Controls.createForm(data, document.getElementById('page'));
               },
               onError: function(data) {alert('Problem!')}
            });      
         }
         window.addEventListener("load", createForm, false);
      </script>
   {/page_script}
   {<content}
      <div id="page" class="page">
         <button type="button" onclick="updateResource('/resource/{entity}')">Update</button>
      </div>
      {/content}