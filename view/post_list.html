{>page/}
{<page_script}
<script src="/script/core.js" type="text/javascript"></script>
   <script src="/script/ajax.js" type="text/javascript"></script>
   <script src="/script/dom.js" type="text/javascript"></script>
   <script type="text/javascript">
      function deleteResource(key) {
         if (window.confirm('Are you sure to delete ' + key + '?')) {
            var data = {}, selector = {}; selector.key = key;
            data.name = '{name}';
            data.selector = selector;
            sps.AJAX.delete({
               url: '/resource/item',
               handleAs: 'json',
               content: data,               
               onSuccess: function(data) {
                  alert(data.message);
                  window.location.reload(true);
               },
               onError: function(data) {
                  alert('Connection with server has failed!')
               }
            });            
         }
      }
   </script>
   {/page_script}
   {<title}<title>{name} list</title>{/title}
      {<content}
         <div class="page">
            <div class="section">
               <a href="/resource/item/create/post" class="border link button">Create Post</a>
            </div>
            <table class="data">
               <thead>
                  <tr>
                     <th scope="col">Title</th>
                     <th scope="col">Date</th>
                     <th scope="col">Content</th>
                     <th scope="col" colspan="2">Action</th>
                  </tr>
               </thead>
               <col id="title"/>
               <col id="date"/>
               <col id="content"/>
               <tbody>
                  {#data}
                  <tr>
                     <td>
                        {title}
                     </td>
                     <td>
                        <time datetime="{date}" class="byline"><{date}></time>
                     </td>
                     <td>
                        {content}
                     </td>
                     <td>
                        <a href='/resource/item/update/post/{"key":"{key}"}' class="link button">Edit</a>
                     </td>
                     <td>
                        <a href="#" onclick="deleteResource('{key}')" class="link button">Delete</a>
                     </td>
                  </tr>
                  {/data}
               </tbody>
            </table>
         </div>
         {/content}