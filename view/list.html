{>page/}
{<page_script}
<script src="/script/core.js" type="text/javascript"></script>
   <script src="/script/ajax.js" type="text/javascript"></script>
   <script src="/script/dom.js" type="text/javascript"></script>
   <script type="text/javascript">
      function deleteResource(key) {
         if (window.confirm('Are you sure to delete ' + key + '?')) {
            var data = {}, selector = {}; selector.key = key;
            data.name = '{resourceName}';
            data.selector = selector;
            sps.AJAX.delete({
               url: '/resource/item',
               content: data,               
               onSuccess: function(data) {
                  alert(data);
                  window.location.reload(true);
               },
               onError: function(data) {
                  alert('Connection with server has failed!')
               }
            });            
         }
      }
   </script>
   {/page_script}
   {<title}<title>{resourceName} list</title>{/title}
      {<content}
         <div class="border body">
            <div class="block">
               <a href="/resource/add/{resourceName}" class="border link button">Add {resourceName}</a>
            </div>
            <table>
               <thead>
                  <tr>
                     <th scope="col">ID</th>
                     <th scope="col">Content</th>
                     <th scope="col" colspan="2">Action</th>
                  </tr>
               </thead>
               <col id="title"/>
               <col id="date"/>
               <col id="content"/>
               <tbody>
                  {#data}
                  <tr>
                     <td>
                        {_id}
                     </td>                     
                     <td>
                        {#forEachAttr}{~n}{value}{/forEachAttr}
                     </td>
                     <td>
                        <a href="/resource/edit/{resourceName}/key/{key}" class="link button">Edit</a>
                     </td>   
                     <td>
                        <a href="#" onclick="deleteResource('{key}')" class="link button">Delete</a>
                     </td>                     
                  </tr>
                  {/data}
               </tbody>
            </table>
         </div>
         {/content}